var indexOf=[].indexOf||function(t){for(var e=0,o=this.length;e<o;e++)if(e in this&&this[e]===t)return e;return-1};define("modules/clean/browse/browse_drag_utils",["jquery"],function(t){return{_dragEnabledChecks:[],getDraggedLink:function(e){var o,n,i,r,s;if(null==e)return null;if(n=indexOf.call(e.types,"Files")>=0,o=indexOf.call(e.types,"text/html")>=0&&t(e.getData("text/html")).attr("draggable")||indexOf.call(e.types,"text/uri-list")>=0&&"about:blank"===e.getData("text/uri-list")||indexOf.call(e.types,"Url")>=0&&"about:blank"===e.getData("Url"),n||o)return null;s=null;try{i=e.getData("text/x-moz-url")}catch(t){t}if(null!=i&&(r=i.split("\n"),r.length>=1&&(s=r[0])),!s)try{s=e.getData("text/uri-list")}catch(t){t}if(!s)try{s=e.getData("Url")}catch(t){}return s||(s=null),s},buildUrlLinkfileContents:function(t){return"[InternetShortcut]\r\nURL="+t+"\r\n"},isFileDragEnabled:function(){var t,e,o,n;for(n=this._dragEnabledChecks,e=0,o=n.length;e<o;e++)if(t=n[e],!t())return!1;return!0},addFileDragEnabledCheck:function(t){return this._dragEnabledChecks.push(t)},removeFileDragEnabledCheck:function(t){var e;if(e=this._dragEnabledChecks.indexOf(t),e>=0)return this._dragEnabledChecks.splice(e,1)},removeAllFileDragEnabledChecks:function(){return this._dragEnabledChecks=[]}}}),define("modules/clean/cookie_check",["jquery","modules/core/cookies","modules/core/notify","modules/core/i18n"],function(t,e,o,n){var i;return i=n._,{initialize_module:function(n){if(!e.are_enabled())return t(function(){return o.error(i("Please enable browser-cookies to use the Dropbox website."))})}}});var bind=function(t,e){return function(){return t.apply(e,arguments)}};define("modules/clean/legacy_pyxl_controllers/bubble_dropdown",["jquery","modules/core/dom","external/underscore","modules/clean/keycode"],function(t,e,o,n){var i;return i=n.KeyCode,(function(){function n(e,i,r,s,a,u,l){var c,h;this.$root=e,this.arrow_direction=i,this.show_on_hover=r,this.show_close_button=s,this.shown_by_default=a,this.top_adjustment=null!=u?u:0,this.tabindex=l,this._hide_bubble=bind(this._hide_bubble,this),this._show_bubble=bind(this._show_bubble,this),this._toggle_bubble=bind(this._toggle_bubble,this),this._on_global_hover=bind(this._on_global_hover,this),this._on_mouseout=bind(this._on_mouseout,this),this._on_mouseover=bind(this._on_mouseover,this),this._onDropdownKeydown=bind(this._onDropdownKeydown,this),this._onTargetKeydown=bind(this._onTargetKeydown,this),this._activateNonButton=bind(this._activateNonButton,this),this.repositionDropdown=bind(this.repositionDropdown,this),this.openDropdown=bind(this.openDropdown,this),this.closeDropdown=bind(this.closeDropdown,this),this.$target=this.$root.find(".bubble-dropdown-target"),this.$dropdown=this.$root.find(".bubble-dropdown"),this.$arrow_anchor=this.$root.find(".bubble-dropdown-arrow-anchor"),this.$arrow=this.$dropdown.find(".bubble-arrow"),this.target_position={top:"bottom",left:"right",bottom:"top",right:"left"}[this.arrow_direction],this.$target.on("keydown",this._onTargetKeydown),this.$dropdown.on("keydown",this._onDropdownKeydown),this.$target.attr("aria-expanded",!1),this.show_close_button?this.$root.find(".bubble-dropdown-x").on("click",this.closeDropdown):this.show_on_hover?(this.$target.on("mouseover",this._on_mouseover),this.$dropdown.on("mouseover",this._on_mouseover),this.$target.on("mouseout",this._on_mouseout),this.$dropdown.on("mouseout",this._on_mouseout),this.$target.attr("tabindex",0).on("focus",this._show_bubble),0===this.$dropdown.find(this._focus_selectors).length&&(c=o.uniqueId("bubble-dropdown-tooltip-"),this.$dropdown.attr({id:c,role:"tooltip"}),this.$target.attr("aria-describedby",c)),t(document).on(n.HOVER_SHOWN,this._on_global_hover)):(this.$target.click(this._toggle_bubble),h=0,this.tabindex&&(h=this.tabindex),"BUTTON"!==this.$target.get(0).tagName&&this.$target.attr({role:"button",tabindex:h}).on("keyup",this._activateNonButton),t("body").on("click",(function(e){return function(o){var n;return!!t(o.target).is("select")||(n=t(o.target).closest(e.$target).length||t(o.target).closest(e.$dropdown).length,n||e._hide_bubble(),!0)}})(this))),this.shown_by_default&&this.openDropdown()}return n.HOVER_SHOWN="bubble:hover:shown",n.prototype._dropdown_shown=!1,n.prototype._focus_selectors="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]",n.prototype.closeDropdown=function(){if(this._dropdown_shown)return this._hide_bubble()},n.prototype.openDropdown=function(){if(!this._dropdown_shown)return this._show_bubble()},n.prototype.repositionDropdown=function(){if(this._dropdown_shown)return this._show_bubble()},n.prototype._activateNonButton=function(t){var e;if((e=t.keyCode)===i.ENTER||e===i.SPACE)return this._toggle_bubble(),!1},n.prototype._onTargetKeydown=function(t){return(t.keyCode===i.ESC&&!this.show_on_hover||t.keyCode===i.TAB&&t.shiftKey||t.keyCode===i.TAB&&1===this.$root.find(this._focus_selectors).length)&&this._hide_bubble(),!0},n.prototype._onDropdownKeydown=function(t){var e;return this.show_on_hover||t.keyCode!==i.ESC?t.keyCode!==i.TAB||t.shiftKey||(e=this.$root.find(this._focus_selectors),t.target===e[e.length-1]&&this._hide_bubble(!this.show_on_hover)):this._hide_bubble(!0),!0},n.prototype._on_mouseover=function(){return t(document).trigger(n.HOVER_SHOWN,this.$target),this._show_bubble(),clearTimeout(this.$dropdown.data("timeout_id"))},n.prototype._on_mouseout=function(){var t;return t=setTimeout(this._hide_bubble,200),this.$dropdown.data("timeout_id",t)},n.prototype._on_global_hover=function(t,e){if(this._dropdown_shown&&e!==this.$target)return this._hide_bubble(),clearTimeout(this.$dropdown.data("timeout_id"))},n.prototype._toggle_bubble=function(){return this._dropdown_shown?this._hide_bubble():this._show_bubble(),!0},n.prototype._show_bubble=function(){var t,o,n,i,r;if(!this.$target.hasClass("disabled")){switch(this.$dropdown.show(),t=this.$arrow_anchor.length?this.$arrow_anchor:this.$target,r=this.$arrow.position().top,o=this.$arrow.position().left,this.arrow_direction){case"left":n=t.outerWidth()+this.$arrow.outerWidth(),i=t.outerHeight()/2-r;break;case"right":n=-1*(this.$dropdown.outerWidth()+this.$arrow.outerWidth()),i=t.outerHeight()/2-r;break;case"top":n=t.outerWidth()/2-o,i=t.outerHeight()+this.$arrow.outerHeight()-this.top_adjustment;break;case"bottom":n=t.outerWidth()/2-o,i=-1*(this.$dropdown.outerHeight()+this.$arrow.outerHeight()+this.top_adjustment)}return e.clone_position(this.$dropdown,t,{setHeight:!1,setWidth:!1,offsetLeft:n,offsetTop:i}),this._dropdown_shown=!0,this.$target.addClass("bubble-dropdown-target--active").attr("aria-expanded",!0)}},n.prototype._hide_bubble=function(t){if(this.$dropdown.hide(),this._dropdown_shown=!1,this.$target.removeClass("bubble-dropdown-target--active").attr("aria-expanded",!1),t)return this.$target.focus()},n})()});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function o(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("modules/clean/legacy_pyxl_controllers/bubble_menu",["jquery","modules/clean/keycode","modules/clean/legacy_pyxl_controllers/bubble_dropdown"],function(t,e,o){var n;return n=e.KeyCode,(function(e){function o(t,e,n,i){this.$root=t,this.arrow_direction=e,this.show_on_hover=n,this.top_adjustment=null!=i?i:0,this.onKeyDown=bind(this.onKeyDown,this),this.onMouseEnter=bind(this.onMouseEnter,this),this.$target=this.$root.find(".bubble-dropdown-target"),this.$target.on("keydown",this.onKeyDown),this.$menu=this.$root.find('*[role="menu"]'),this.$menuitems=this.$root.find('*[role="menuitem"]'),this.$menuitems.attr("role","menuitem"),this.$menuitems.on("keydown",this.onKeyDown),this.$menuitems.on("mouseenter",this.onMouseEnter),o.__super__.constructor.apply(this,arguments)}return extend(o,e),o.prototype.focusPrevious=function(t){var e;return e=this.$menuitems.index(t),e=e===-1||0===e?this.$menuitems.length-1:e-1,this.$menuitems.get(e).focus()},o.prototype.focusNext=function(t){var e;return e=this.$menuitems.index(t),e=e===-1||e===this.$menuitems.length-1?0:e+1,this.$menuitems.get(e).focus()},o.prototype.onMouseEnter=function(e){return t(this.$menu).removeClass("bubble-menu--keyboard")},o.prototype.onKeyDown=function(e){return t(this.$menu).addClass("bubble-menu--keyboard"),e.keyCode===n.DOWN?(this.focusNext(e.target),e.stopPropagation(),e.preventDefault()):e.keyCode===n.UP?(this.focusPrevious(e.target),e.stopPropagation(),e.preventDefault()):void 0},o})(o)});var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function o(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;define("modules/clean/legacy_pyxl_controllers/input",["jquery","modules/clean/accessibility/tabbable","modules/core/i18n","modules/core/exception","require"],function(t,e,o,n,i){var r,s,a,u,l,c,assert;return l=o._,assert=n.assert,c=function(e){var o;return o=t.data(e,"input-element"),assert(o.length,"TextInput element has no related input element please ensure it was setup correctly"),o},t.valHooks.textinput={get:function(t){return c(t).val()},set:function(t,e){return c(t).val(e).trigger("input")}},u=(function(e){function o(e){this.$text_input=e,this._on_change=bind(this._on_change,this),this.persistent_label=this.$text_input.is(".label-above"),this.$input=this.$text_input.find(".text-input-input"),this.$text_input.data("input-element",this.$input),this.$label=this.$text_input.find("label"),this.$text_input.find(".error-message").length&&this.$input.addClass("input-error"),this.$text_input.each(function(t,e){return e.type="textinput"}),this.$text_input.focus((function(t){return function(){return setTimeout(function(){return t.$input.focus()},0)}})(this)),t(function(){var e;if("BODY"===(null!=(e=document.activeElement)?e.tagName:void 0))return t(".autofocus:visible").first().focus()}),this._listen(),this._on_change(),o.__super__.constructor.call(this)}return extend(o,e),o.prototype._listen=function(){return this.$input.on("keydown keyup paste input blur",(function(t){return function(){return t._on_change()}})(this)),this.$input.on("blur",(function(t){return function(e){return t.$text_input.trigger(e)}})(this)),this.$input.on("focus",(function(t){return function(){return t.$input.removeClass("input-error")}})(this))},o.prototype._on_change=function(){if(!this.persistent_label)return this.$label.toggle(!this.$input.val())},o})(e),s=(function(t){function e(t){this.$text_input=t,this.$caps=this.$text_input.find(".password-caps-indicator"),this.$caps_lock=!1,this.$text_input.on("keypress",(function(t){return function(e){var o,n,i,r,s;return r=/Mac/.test(navigator.platform),n=null!=(s=e.charCode)?s:e.keyCode,o=String.fromCharCode(n),o.toLowerCase()===o.toUpperCase()?i=void 0:o===o.toLowerCase()?i=e.shiftKey:o!==o.toUpperCase()||e.shiftKey&&r||(i=!e.shiftKey),null!=i&&(t.$caps_lock=i),t.$caps_lock?t.$caps.addClass("password-caps-indicator-activated"):t.$caps.removeClass("password-caps-indicator-activated")}})(this)),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e})(u),a=(function(e){function o(t){this.$text_input=t,this._on_change=bind(this._on_change,this),this.$bubble_title=this.$text_input.find(".password-bubble-title"),this.$bubble_desc=this.$text_input.find(".password-bubble-desc"),this.$meter=this.$text_input.find(".password-input-meter"),this.$default_bubble_text=this.$bubble_desc.text(),this.$last_pwd="",i(["external/zxcvbn"]),o.__super__.constructor.call(this,this.$text_input)}return extend(o,e),o.prototype._on_change=function(){var t,e,n,i,r;if(e=this.$input.val(),this.$last_pwd!==e)return this.$last_pwd=e,"correcthorsebatterystaple"===e||"Tr0ub4dour&3"===e||"Tr0ub4dor&3"===e?(n=0,i=l("lol",{comment:"'lol'='laugh out loud'"}),this.$bubble_title.text(i),"correcthorsebatterystaple"===e?(t=l("Whoa there, don't take advice from a webcomic too literally ;)",{comment:"This text is displayed rarely, whenever a user selects a password that is from this comic: http://imgs.xkcd.com/comics/password_strength.png"}),this.$bubble_desc.text(t)):(t=l("Guess again",{comment:"this text is displayed rarely, whenever a user selects a password that is from this comic: http://imgs.xkcd.com/comics/password_strength.png"}),this.$bubble_desc.text(t))):(r=["",l("Weak"),l("So-so"),l("Good"),l("Great!")],n=this._score(e),i=r[n],this.$bubble_title.text(i),this.$bubble_desc.text(this.$default_bubble_text)),this.$meter.find(".password-input-dot").removeClass("password-input-dot-selected"),this.$meter.find(".password-input-dot").slice(4-n,4).addClass("password-input-dot-selected"),o.__super__._on_change.apply(this,arguments)},o.prototype._get_user_inputs=function(){var e,o,n,i,r;for(n=["dropbox"],r=this.$text_input.closest("form").find("input[type=text], input[type=email]"),o=0,i=r.length;o<i;o++)e=r[o],n.push(t(e).val());return n},o.prototype._score=function(t){return window.zxcvbn&&t?Math.max(1,zxcvbn(t,this._get_user_inputs()).score):0},o})(s),r=(function(t){function e(t){this.$text_input=t,this.crement=bind(this.crement,this),e.__super__.constructor.call(this,this.$text_input),this.$text_input.find(".number-input-btn--up").on("click",(function(t){return function(e){return t.crement(e,1)}})(this)),this.$text_input.find(".number-input-btn--down").on("click",(function(t){return function(e){return t.crement(e,-1)}})(this)),this.min=this.$input.attr("min"),null!=this.min&&(this.min=parseInt(this.min)),this.max=this.$input.attr("max"),null!=this.max&&(this.max=parseInt(this.max))}return extend(e,t),e.prototype.crement=function(t,e){var o;return o=parseInt(this.$text_input.val())+e,isNaN(o)||(null!=this.min&&o<this.min?this.$text_input.val(this.min):null!=this.max&&o>this.max?this.$text_input.val(this.max):this.$text_input.val(o)),this.$text_input.trigger("change")},e})(u),{TextInput:u,PasswordInput:s,PasswordWatchInput:a,NumberInput:r}});var indexOf=[].indexOf||function(t){for(var e=0,o=this.length;e<o;e++)if(e in this&&this[e]===t)return e;return-1};define("modules/clean/react/browse/comment_status",["modules/clean/activity/constants","modules/clean/comments/utils","modules/clean/file_activity/api","modules/clean/flux/dispatcher","modules/clean/react/browse/actions","modules/clean/react/browse/constants","modules/clean/react/browse/store"],function(t,e,o,n,i,r,s){var a,u,l,c,h,d,p,_,b,f,m,w,g,y,$,x,v;return a=t.ActivityContext,u=r.BrowseActionTypes,c=r.FileTypes,l=s.BrowseStore,x={},h=function(t){var e;return o.fetchCommentStatusBatch({actorId:null!=(e=l.user())?e.id:void 0,context:a.BROWSE_FILE_VIEWER,contextDataList:t,isBackgroundRequest:!0})},p=function(t){return null==t.feedback_off&&null==t.comment_count&&null==t.unresolved_comment_count},_=function(t){return t.type===c.FILE},b=function(t){return null!=t.after},d=function(t){var e,o;if(e=t.files,o=e.filter(_).filter(p).map(function(t){return t.fq_path}),o.length>0)return h(o).then(function(t){return indexOf.call(window,"requestIdleCallback")>=0?window.requestIdleCallback(function(){return i.addCommentStatusBatch({commentStatusByFqPath:t})}):i.addCommentStatusBatch({commentStatusByFqPath:t})})},y=d,w=d,m=d,g=function(t){var e,o;return e=t.fileDeltas,t.path,o=e.filter(b).map(function(t){return t.after}),d({files:o})},f=function(t){var e;switch(e=t.action,e.type){case u.LOAD_PATH:return y(e.data);case u.ADD_FILES:return w(e.data);case u.INITIALIZE_EVERYTHING:return m(e.data);case u.CHANGE_FILES:return g(e.data)}},$=function(t){return null==t&&(t=n),x={dispatcher:t,dispatchToken:t.register(f)},d({files:l.files().toArray()})},v=function(){return x.dispatcher.unregister(x.dispatchToken),x={}},{setup:$,teardown:v}}),define("modules/clean/react/locale_selector",["jquery","external/react","external/underscore","modules/core/i18n","modules/core/exception","modules/clean/ajax","modules/clean/react/css","modules/clean/react/modal","modules/clean/react/sprite","modules/constants/locales","modules/constants/page_load","modules/core/browser","modules/core/notify","modules/core/uri"],function(t,e,o,n,i,r,s,a,u,l,c,h,d,p){var _,b,f,m,w,g,y,$,x,v;return w=n._,m=a.Modal,v=e.DOM,$=e.createElement,y=function(t,e,o){var n;return null==o&&(o=!1),n=o?"/team/admin/set_locale":"/set_locale",d.success(w("Changing language...")),r.SilentBackgroundRequest({url:p({path:n}),data:{locale:t,locale_cont:e},success:function(){return h.redirect(e)}})},f=e.createClass({displayName:"LocaleTag",propTypes:{locale:e.PropTypes.shape({localeCode:e.PropTypes.string.isRequired,localeName:e.PropTypes.string.isRequired,decorator:e.PropTypes.string.isRequired}).isRequired},render:function(){var t;return t=this.props.locale.localeName,""!==this.props.locale.decorator&&(t+=" ["+this.props.locale.decorator+"]"),v.span({"data-locale":this.props.locale.localeCode},t)}}),g=e.createClass({displayName:"LocaleSelectorModal",propTypes:{isTeamAdminSettingsConsole:e.PropTypes.bool.isRequired,shouldAllowInternalLocales:e.PropTypes.bool.isRequired},handleCloseModal:function(t){return history.pushState("",document.title,h.get_href_no_hash())},handleLocaleSelected:function(t){return(function(e){return function(o){return o.preventDefault(),history.pushState("",document.title,h.get_href_no_hash()),m.close(),y(t,h.get_href_no_hash(),e.props.isTeamAdminSettingsConsole)}})(this)},_renderLocaleList:function(){var t,e;return e=this.props.shouldAllowInternalLocales?l.LIST_OF_LOCALES_WITH_INTERNAL:l.LIST_OF_LOCALES_WITHOUT_INTERNAL,v.div({className:"react-locale-selector-modal"},v.ul({className:"react-locale-selector-modal__list u-unlist u-trim-padding"},function(){var o,n,i;for(i=[],o=0,n=e.length;o<n;o++)t=e[o],i.push(this._renderLocale(t));return i}.call(this)))},_renderLocale:function(t){return v.li({key:t.localeCode},v.button({className:"locale-option button-as-link react-locale-selector-modal__list-item-button",onClick:this.handleLocaleSelected(t.localeCode).bind(this)},$(f,{locale:t})))},render:function(){return $(m,{onDismissCompleted:this.handleCloseModal,ref:"modal",width:550,title:w("Choose a language"),acceptButtonText:null},this._renderLocaleList())}}),b=s(g,["/static/css/components/react_locale_selector-vflhGMsCx.css","/static/css/modal-vfl3a7WF1.css"]),_=e.createClass({displayName:"LocaleSelector",statics:{showModal:function(t,e){return null==t&&(t=!1),null==e&&(e=!0),m.showInstance($(b,{isTeamAdminSettingsConsole:t,shouldAllowInternalLocales:e}))}},propTypes:{isTeamAdminSettingsConsole:e.PropTypes.bool,shouldAllowInternalLocales:e.PropTypes.bool},getDefaultProps:function(){return{isTeamAdminSettingsConsole:!1,shouldAllowInternalLocales:!0}},handleLocaleLinkClick:function(t){return t.preventDefault(),m.showInstance($(b,{isTeamAdminSettingsConsole:this.props.isTeamAdminSettingsConsole,shouldAllowInternalLocales:this.props.shouldAllowInternalLocales}))},_renderLocaleLink:function(){return v.span({id:"locale-link"},$(u,{group:"web",name:"globe_gray_20x20",alt:""}),v.button({className:"button-as-link react-locale-selector-link",title:w("Choose a language"),onClick:this.handleLocaleLinkClick},$(f,{locale:o.find(l.LIST_OF_LOCALES_WITH_INTERNAL,function(t){return t.localeCode===c.USER_LOCALE})}),$(u,{class:"arrow",group:"web",name:"arrow-up-gray",alt:""})))},render:function(){return v.div({id:"locale-container"},this._renderLocaleLink())}}),x=s(_,["/static/css/components/locale_selector-vflRu24eh.css"]),{LocaleSelectorModal:b,LocaleSelector:x,initialize_module:function(e){if(null!=e?e.dom_id:void 0)return t(document).ready(function(){return t("#"+e.dom_id).click(function(){return x.wrappedClass.showModal()})})}}});
//# sourceMappingURL=pkg-maestro-misc.min.js-vflFfk0Jd.map