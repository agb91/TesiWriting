define("modules/clean/avatar/avatar_with_default",["external/react","modules/clean/avatar/photo_avatar","modules/clean/avatar/size","modules/clean/css"],function(e,t,r,n){var s,a;return a=r.VALID_AVATAR_DIMENSIONS,e.DOM,s=e.createFactory(t),e.createClass({displayName:"AvatarWithDefault",propTypes:{alt:e.PropTypes.string,dimension:e.PropTypes.oneOf(a).isRequired,defaultAvatar:e.PropTypes.element.isRequired,onPhotoClick:e.PropTypes.func,photoUrl:e.PropTypes.string,optionalClass:e.PropTypes.string,shape:e.PropTypes.oneOf(["CIRCLE","SQUARE"]).isRequired},getDefaultProps:function(){return{shape:"CIRCLE"}},componentDidMount:function(){return n.require_css("/static/css/scooter/scooter-scoped-vfl0UVTY2.css")},render:function(){return null!=this.props.photoUrl?s({alt:this.props.alt,dimension:this.props.dimension,onClick:this.props.onPhotoClick,photoUrl:this.props.photoUrl,optionalClass:this.props.optionalClass,shape:this.props.shape}):this.props.defaultAvatar}})}),define("modules/clean/avatar/initials_avatar",["external/react","modules/clean/avatar/size","modules/clean/avatar/style","modules/clean/css"],function(e,t,r,n){var s,a,o;return s=t.VALID_AVATAR_DIMENSIONS,o=r.getClassName,a=e.DOM,e.createClass({displayName:"InitialsAvatar",propTypes:{alt:e.PropTypes.string,dimension:e.PropTypes.oneOf(s).isRequired,initials:e.PropTypes.string.isRequired,shape:e.PropTypes.oneOf(["CIRCLE","SQUARE"]).isRequired,color:e.PropTypes.string,onClick:e.PropTypes.func,optionalClass:e.PropTypes.string},componentDidMount:function(){return n.require_css("/static/css/scooter/scooter-scoped-vfl0UVTY2.css")},render:function(){var e;return e=["c-avatar--no-img","c-avatar--"+this.props.shape.toLowerCase()],null!=this.props.optionalClass&&e.push(this.props.optionalClass),null!=this.props.onClick&&this.props.alt?(e.push("u-unbutton"),a.button({className:o(this.props.dimension,e),onClick:this.props.onClick,style:this.getContainerStyle()},a.span({"aria-hidden":!0},this.props.initials),a.span({className:"ax-visually-hidden"},this.props.alt))):a.div({className:o(this.props.dimension,e),onClick:this.props.onClick,style:this.getContainerStyle()},this.props.alt?[a.span({key:"initials","aria-hidden":!0},this.props.initials),a.span({key:"alt",className:"ax-visually-hidden"},this.props.alt)]:this.props.initials)},getContainerStyle:function(){var e;return e={},this.props.color&&(e.backgroundColor=this.props.color),e}})}),define("modules/clean/avatar/photo_avatar",["external/react","modules/clean/avatar/size","modules/clean/avatar/style"],function(e,t,r){var n,s,a;return n=t.VALID_AVATAR_DIMENSIONS,r.dynamicInlineStyle,a=r.getClassName,s=e.DOM,e.createClass({displayName:"PhotoAvatar",propTypes:{alt:e.PropTypes.string,dimension:e.PropTypes.oneOf(n).isRequired,photoUrl:e.PropTypes.string.isRequired,onClick:e.PropTypes.func,optionalClass:e.PropTypes.string,shape:e.PropTypes.oneOf(["CIRCLE","SQUARE"])},getDefaultProps:function(){return{shape:"CIRCLE"}},render:function(){var e,t;return e=["c-avatar--"+this.props.shape.toLowerCase()],null!=this.props.optionalClass&&e.push(this.props.optionalClass),t=s.img({alt:this.props.alt||"",src:this.props.photoUrl,width:this.props.dimension,height:this.props.dimension}),null!=this.props.onClick&&this.props.alt?(e.push("u-unbutton"),s.button({className:a(this.props.dimension,e),onClick:this.props.onClick},t)):s.div({className:a(this.props.dimension,e),onClick:this.props.onClick},t)}})}),define("modules/clean/avatar/size",[],function(){var e,t,r;return e={XSMALL:16,SMALL:24,MEDIUM:32,LARGE:48,XLARGE:64},t=(function(){var t;t=[];for(r in e)t.push(e[r]);return t})(),{AVATAR_DIMENSION_BY_SIZE:e,VALID_AVATAR_DIMENSIONS:t}}),define("modules/clean/avatar/style",["external/classnames","external/react","modules/clean/accessibility/utils"],function(e,t,r){var n,s,a,o;return s=r.accessibleColorPalette,n={16:"c-avatar--xs",24:"c-avatar--s",32:"c-avatar--m",48:"c-avatar--l",64:"c-avatar--xl"},a=function(e){var t,r;for(null==e&&(e=""),t=5381*e.length,r=0;r<e.length;)t=e.charCodeAt(r)+((t<<6)+(t<<16)-t),r++;return t=Math.abs(t),s[t%s.length]},o=function(t,r){var s;return null==t&&(t=32),null==r&&(r=[]),s=["c-avatar",n[t]],r=r.concat(s),e.apply(this,r)},{colorValueForAvatarName:a,getClassName:o}}),define("modules/clean/avatar/viewer_avatar",["require","exports","tslib","external/react","modules/clean/avatar/photo_avatar","modules/clean/avatar/size","modules/clean/css","modules/core/uri","modules/clean/event_handler"],function(e,t,r,n,s,a,o,i,l){"use strict";var c=(function(e){function t(t){var r=e.call(this,t)||this;return r.state={photoUrl:r.props.photoUrl},r}return r.__extends(t,e),t.prototype.componentDidMount=function(){var e=this;o.require_css("/static/css/scooter/scooter-scoped-vfl0UVTY2.css"),this.events.on(document,"db:account_photo:photo_set",function(t,r){var n=2*e.props.dimension,s=n+"x"+n,a=i.parse(r.saved_photo_url).updateQuery({size:s}).toString();e.setState({photoUrl:a})}),this.events.on(document,"db:account_photo:photo_deleted",function(){e.setState({photoUrl:null})})},t.prototype.hasPhotoAvatar=function(){return null!=this.state.photoUrl},t.prototype.render=function(){return this.hasPhotoAvatar()?n.createElement(s,{alt:this.props.alt,dimension:this.props.dimension,onClick:this.props.onPhotoClick,photoUrl:this.state.photoUrl,optionalClass:this.props.optionalClass}):this.props.defaultAvatar},t})(n.Component);return c.displayName="ViewerAvatar",c.propTypes={dimension:n.PropTypes.oneOf(a.VALID_AVATAR_DIMENSIONS).isRequired},c=r.__decorate([l.eventHandler],c)}),define("modules/clean/components/loading_indicator",["external/classnames","external/underscore","external/react","modules/clean/react_logger","modules/core/accessible_announce","modules/core/i18n"],function(e,t,r,n,s,a){var o,i,l,c,p;return l=n.ReactLogger,o=s.AccessibleAnnounce,c=a._,p=r.DOM,i={DOTS:"dots",SPINNER:"spinner",BLUE_SPINNER:"blue_spinner"},r.createClass({displayName:"LoadingIndicator",statics:{LoadingIndicatorStyle:i},propTypes:{style:r.PropTypes.oneOf(t.values(i)),className:r.PropTypes.string,startMessage:r.PropTypes.string,finishMessage:r.PropTypes.string,shouldAnnounceMessage:r.PropTypes.bool},getDefaultProps:function(){return{style:i.DOTS,className:"",startMessage:c("Loading…"),finishMessage:null,shouldAnnounceMessage:!0}},componentWillMount:function(){return l.start(this.constructor.displayName)},componentDidMount:function(){if(l.end(this.constructor.displayName),this.props.shouldAnnounceMessage)return o.polite(this.props.startMessage)},componentWillUnmount:function(){if(this.props.finishMessage&&this.props.shouldAnnounceMessage)return o.polite(this.props.finishMessage)},render:function(){var r;return r={},this.props.className&&(r=t.object(this.props.className.split(" ").map(function(e){return[e,!0]}))),r=t.extend(r,{"c-loader":!0,"c-loader--spinner":this.props.style===i.SPINNER,"c-loader--spinner--blue":this.props.style===i.BLUE_SPINNER}),p.div({className:e(r)},this.props.startMessage)}})});var indexOf=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};define("modules/clean/downloads",["jquery","modules/clean/filepath","modules/core/browser","modules/core/exception","modules/core/i18n","modules/core/notify","modules/core/uri"],function(e,t,r,n,s,a,o){var i,l,c,assert;return assert=n.assert,c=s._,l=["dl-web.dropbox.com","dl.dropboxusercontent.com"],i=c("There was an error downloading your file."),(function(){function n(){}return n.get=function(t){var s,c,p,u,d,h,m,f,_;return _=t.url,d=t.error,s=t.__do_not_use_expected_domain,u=o.parse(_),c=s||u.authority,assert(indexOf.call(l,c)>=0),r.iOS?(assert((f=u.authority,indexOf.call(["",window.location.host].concat(l),f)>=0)),void r.unsafeRedirect(_)):(n.initialized||n.init(),p=n._create_download_id(),m={},m._download_id=p,m._notify_domain=window.location.host,u.updateQuery(m),h=e("<iframe />",{src:String(u)}).css("display","none"),h.on("load",function(){var e;return e=function(){var e;if(e=n.current_watches[p],null!=e)return r.chrome&&(a.error(i),"function"==typeof e.error&&e.error()),n._cleanup(p)},setTimeout(e,100)}),n.current_watches[p]={origin:c,error:d,iframe:h},e("body").append(h),window.setTimeout(function(){return n._cleanup(p)},9e4),!1)},n.get_blockserver_link=function(e){var t,r,n,s,a;return a=e.url,r=e.ns_id,n=e.ns_path,t=e.error,s=o.parse(a),s.setScheme("https"),s.updateQuery({dl:1}),null!=r&&(assert("string"==typeof n,"Namespace ID was passed with invalid path, got: "+n),s.updateQuery({nsid:r}),s.updateQuery({path:n})),assert("dl-web.dropbox.com"===s.authority,"download_blockserver_url expects a blockserver resource, got: "+a),this.get({url:s.toString(),error:t})},n.zip_batch_by_ns_id=function(r){var n,s,a,i,l,c,p,u,d,h,m,f,_;for(m=r.parent_ns_id,f=r.parent_ns_path,i=r.files,_=r.subject_uid,n=r.block_hash,c=o({scheme:"https",authority:"dl-web.dropbox.com",path:"/zip_batch_by_ns_id"}).updateQuery("_subject_uid",_),c.updateQuery({parent_ns_id:m,parent_ns_path:f||"/"}),c=c.toString(),l=e("<form>",{action:c,method:"post"}),u=0,d=i.length;u<d;u++)s=i[u],a=t.filename(s.fq_path),h=f+"/"+a,p=e("<input>",{name:"ns_paths",value:h}),p.appendTo(l);return p=e("<input>",{name:"w",value:n}),p.appendTo(l),e(document.body).append(l),l.submit(),l.remove()},n.get_zip=function(t){var r,n,s,a,i,l,c,p,u,d;for(s=t.fq_paths,d=t.subject_uid,r=t.block_hash,p=t.parent_path,a=o({scheme:"https",authority:"dl-web.dropbox.com",path:"/zip_batch"}).updateQuery("_subject_uid",d).toString(),u=e("<form>",{action:a,method:"post"}),l=0,c=s.length;l<c;l++)n=s[l],i=e("<input>",{name:"files",value:n}),i.appendTo(u);return i=e("<input>",{name:"parent_path",value:p||"/"}),i.appendTo(u),i=e("<input>",{name:"w",value:r}),i.appendTo(u),e(document.body).append(u),u.submit(),u.remove()},n.init=function(){return n.initialized=!0,n.current_watches={},e(window).on("message",n._post_handler)},n._post_handler=function(e){var t,r,s,c;if(t=o.parse(e.originalEvent.origin),"https"===t.scheme&&(s=t.authority,!(indexOf.call(l,s)<0))){try{r=JSON.parse(e.originalEvent.data)}catch(e){return}if(null!=(null!=r?r.download_id:void 0)&&(c=n.current_watches[r.download_id],null!=c&&t.authority===c.origin&&e.originalEvent.source===c.iframe[0].contentWindow))return"failed"===r.status&&(a.error(r.message||i),"function"==typeof c.error&&c.error()),n._cleanup(r.download_id)}},n._cleanup=function(e){var t;if(t=this.current_watches[e],null!=t)return t.iframe.remove(),delete this.current_watches[e]},n._create_download_id=function(){var e,t;for(t="",e=1;e<=4;++e)t+=String(Math.random()).split(".")[1];return t},n})()});var bind=function(e,t){return function(){return e.apply(t,arguments)}};define("modules/clean/legacy_pyxl_controllers/ajax_form",["jquery","modules/core/controller_helpers","modules/core/exception","modules/core/html","modules/core/i18n","modules/core/notify","modules/clean/ajax","modules/clean/validators/validators"],function(e,t,r,n,s,a,o,i){var l,assert;return assert=r.assert,l=s._,(function(){function r(e,r,n){this.$container=e,this.do_before_submitting=r,this._clear_pending=bind(this._clear_pending,this),this._clear_errors=bind(this._clear_errors,this),this._handle_errors=bind(this._handle_errors,this),this._on_error=bind(this._on_error,this),this._on_success=bind(this._on_success,this),this._submit_form=bind(this._submit_form,this),this._install_schema=bind(this._install_schema,this),this.add_additional_data=bind(this.add_additional_data,this),this.additional_data={},n=n||{},"FORM"===this.$container.prop("tagName")?this.$form=this.$container:this.$form=this.$container.find("form"),this.$form.submit(this._submit_form),this.$submit_button=this.$form.find("[type='submit']"),t.deprecated_set_controller(this.$form,this),this.schema={},this.should_validate=n.client_side_validation,this.should_submit_once=n.should_submit_once,this.error_handler="function"==typeof n.error_handler&&n.error_handler,this.should_validate&&this._fetch_schema()}return r.SUCCESS_EVENT="db:ajaxform:success",r.ERROR_EVENT="db:ajaxform:error",r.extract_errors=function(e){if(0!==e.indexOf("err:"))return!1;e=e.substr(4);try{return JSON.parse(e)}catch(t){return t,"string"==typeof e?e:l("There was a problem completing this request.")}},r.clear_errors=function(e){return e.find(".input-error").removeClass("input-error"),e.find(".error-message").remove()},r.clear_error=function(e,t){var r;return r=e.find("input[name='"+t+"'], input[data-encrypted-name='"+t+"']"),r.removeClass("input-error"),e.find("[data-error-field-name='"+t+"']").prev(".error-message").remove()},r.fill_errors=function(t,r){var n,s,a,o;t.find(".c-card").addClass("u-l-dn"),a=[];for(s in r)o=r[s],n=e("<span>",{class:"error-message"}),o.message_html?n.html(o.message_html):n.text(o.message_text),n.insertBefore(t.find("[data-error-field-name='"+s+"']")),t.find("input[name='"+s+"'], input[data-encrypted-name='"+s+"']").addClass("input-error"),"failed-login-invalid-email-password"===s?a.push(t.find(".c-card").removeClass("u-l-dn")):a.push(void 0);return a},r.prototype.add_additional_data=function(t){return e.extend(this.additional_data,t)},r.prototype._install_schema=function(t){var r;try{r=JSON.parse(t)}catch(e){e}return e.each(r,(function(e){return function(t,r){if(r)return e.schema[t]=i.create(r)}})(this))},r.prototype._fetch_schema=function(){return o.ValidationSchemaRequest({url:this.$form.attr("action"),success:(function(e){return function(t){return e._install_schema(t)}})(this)})},r.prototype.reset=function(){var t,r,n,s,a;for(s=this.$form.find("input"),a=[],t=0,n=s.length;t<n;t++)r=s[t],a.push(e(r).closest(".text-input").val(r.defaultValue));return a},r.prototype.set_input_value=function(e,t){return this.$form.find("input[name='"+e+"']").closest(".text-input").val(t)},r.prototype._get_form_data=function(){var t,r,n,s,a,o,i,l,c,p,u;for(t={},c=this.$form.find("input, select, textarea").not(":disabled").not(":radio"),r=0,o=c.length;r<o;r++)n=c[r],l=e(n).attr("name"),l&&(s=e(n).attr("type"),u="checkbox"===s?e(n).prop("checked")?"True":"":e(n).val(),"radio"!==s&&assert(!(l in t),"found multiple inputs with the same name"),t[l]=u);for(p=this.$form.find("input:radio:checked:not(disabled)"),a=0,i=p.length;a<i;a++)n=p[a],l=e(n).attr("name"),t[l]=e(n).val();return t},r.prototype._validate=function(t){var r,n;return this.should_validate?(r={},n=!0,e.each(t,(function(e){return function(s,a){var o;if(e.schema[s])try{return e.schema[s].validate(a,{field:s,data:t,errors:r})}catch(e){return o=e,n=!1,r[s]={message_text:o.message}}}})(this)),n?null:r):null},r.prototype._submit_form=function(e){var t;return e.preventDefault(),"function"==typeof this.do_before_submitting&&this.do_before_submitting(),this._clear_errors(),this.$form.prop("disabled",!0),this.$form.addClass("ajax-loading"),this.$submit_button.prop("disabled",!0),t=this._validate(this._get_form_data()),t?this._handle_errors(t):this.send_request()},r.prototype.send_request=function(){var t;return t=this._get_form_data(),e.extend(t,this.additional_data),o.FormWebRequest({url:this.$form.attr("action"),data:t,success:this._on_success,error:this._on_error,complete:this._on_complete,skipErrorHandling:!0})},r.prototype._on_success=function(e,t,n){var s,a,o;if(o=n.responseText,s=r.extract_errors(o),s!==!1)return void this._handle_errors(s);try{a=JSON.parse(o)}catch(e){return e,void this._on_error()}return this.$form.trigger(r.SUCCESS_EVENT,a),this._clear_pending(!this.should_submit_once)},r.prototype._on_error=function(){return this.$form.trigger(r.ERROR_EVENT),a.error(l("There was a problem completing this request.")),this._clear_pending(!0)},r.prototype._handle_errors=function(e){if(this.error_handler)this.error_handler(e);else{if("string"==typeof e)return a.error(new n(e)),void this._clear_pending(!0);r.fill_errors(this.$form,e)}return this._clear_pending(!0),this.$form.trigger(r.ERROR_EVENT,e)},r.prototype._clear_errors=function(){return this.$form.find(".error-message").remove(),this.$form.find("input").removeClass("input-error")},r.prototype._clear_pending=function(e){if(this.$form.removeClass("ajax-loading"),e)return this.$form.prop("disabled",!1),this.$submit_button.prop("disabled",!1)},r})()}),define("modules/clean/react/calendar",["require","exports","tslib","external/classnames","external/mcl/dropdown_button","external/react","external/react-dom","modules/clean/datetime","modules/clean/react/css","modules/clean/react/sprite","modules/core/i18n"],function(e,t,r,n,s,a,o,i,l,c,p){"use strict";function u(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}var d=function(){},h=0,m=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={currentDate:t.props.initDate,calendarIsVisible:t.props.calendarIsInitiallyVisible},t.setCalendarDateViewRef=function(e){t.refCalendarDateView=o.findDOMNode(e)},t.setCalendarViewRef=function(e){t.refCalendarView=o.findDOMNode(e)},t._handleDocumentClick=function(e){if(t.refCalendarView&&t.refCalendarDateView){var r=e.target;!t.state.calendarIsVisible||t.refCalendarView.contains(r)||t.refCalendarDateView.contains(r)||(e.preventDefault(),e.stopPropagation(),t.closeCalendar())}},t.toggleCalendarView=function(){t.setState({calendarIsVisible:!t.state.calendarIsVisible})},t.handleDateSelected=function(e){t.setState({currentDate:e}),t.props.onDateChange(e),t.closeCalendar()},t.closeCalendar=function(){t.setState({calendarIsVisible:!1}),t.refCalendarDateView&&t.refCalendarDateView.focus()},t._startOfDay=function(e){var t=new Date(e.getTime());return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){document.addEventListener("click",this._handleDocumentClick)},t.prototype.componentWillUnmount=function(){document.removeEventListener("click",this._handleDocumentClick)},t.prototype.render=function(){var e,t={"c-datepicker":!0,"scooter-css u-l-fl clearfix":!this.props.isMaestroDesign};return this.state.calendarIsVisible&&(e=a.createElement(_,{ref:this.setCalendarViewRef,alignAtLeft:this.props.alignAtLeft,firstDay:this._startOfDay(this.props.firstDay),lastDay:this._startOfDay(this.props.lastDay),initDate:this.state.currentDate,onDateChange:this.handleDateSelected,onEscapePressed:this.closeCalendar})),a.createElement("div",{className:n(t)},a.createElement(f,{date:this.state.currentDate,ref:this.setCalendarDateViewRef,calendarVisible:this.state.calendarIsVisible,disabled:this.props.disabled,isMaestroDesign:this.props.isMaestroDesign,onClick:this.toggleCalendarView}),e)},t})(a.Component);m.displayName="Calendar",m.defaultProps=(function(){var e=new Date,t=new Date(e.getTime());t.setFullYear(t.getFullYear()-1);var r=new Date(e.getTime());return r.setFullYear(r.getFullYear()+1),{disabled:!1,initDate:e,isMaestroDesign:!1,firstDay:t,lastDay:r,alignAtLeft:!0,onDateChange:d,calendarIsInitiallyVisible:!1}})();var f=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._date_to_string=function(e){return i.format_date(e,i.localized_date_format)},t.renderLegacyCaret=function(){return a.createElement(c,{group:"web",name:"calendar_view_month",className:"u-l-fr",alt:t.props.description})},t}return r.__extends(t,e),t.prototype.render=function(){var e={"is-active":this.props.calendarVisible,"c-input":!this.props.isMaestroDesign,"filter-item__filter-input":this.props.isMaestroDesign};if(this.props.isMaestroDesign)return a.createElement(s.DropdownButton,{disabled:this.props.disabled,onClick:this.props.onClick,"aria-expanded":this.props.calendarVisible},this._date_to_string(this.props.date));var t=a.createElement("span",{className:"c-calendar__date-text"},this._date_to_string(this.props.date));return a.createElement("button",{className:n(e),disabled:this.props.disabled,onClick:this.props.onClick,"aria-expanded":this.props.calendarVisible},this.renderLegacyCaret(),t)},t})(a.Component);f.displayName="CalendarDateView",f.defaultProps={isMaestroDesign:!1,calendarVisible:!0,onClick:function(){},disabled:!1,description:p._("Change deadline")};var _=(function(e){function t(t){var r=e.call(this,t)||this;return r.state={viewDate:r.props.initDate,currentlyActiveDate:r.props.initDate},r.clampToFirstLastDate=function(e){e<r.props.firstDay?e.setTime(r.props.firstDay.getTime()):e>r.props.lastDay&&e.setTime(r.props.lastDay.getTime())},r.getDaysInMonth=function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},r.setPrevMonthButtonRef=function(e){r.refPrevButton=e},r.setNextMonthButtonRef=function(e){r.refNextButton=e},r.setCurrentDayButtonRefAndMaintainFocus=function(e){var t=document.activeElement&&document.activeElement.getAttribute("data-day-in-month");r.refCurrentDayButton=e,r.refCurrentDayButton&&t&&r.refCurrentDayButton.focus()},r.handleDayClicked=function(e){var t=e.target,n=parseInt(t.getAttribute("data-day-in-month")||"",10),s=new Date(r.state.viewDate.getFullYear(),r.state.viewDate.getMonth(),n);r.setState({currentlyActiveDate:s}),r.props.onDateChange(s)},r.handleKeyDownOnDay=function(e){if(27===e.which)return r.props.onEscapePressed(),void e.preventDefault();if(9===e.which){var t=void 0,n=r.refNextButton.classList.contains("u-l-dn")?null:r.refNextButton,s=r.refPrevButton.classList.contains("u-l-dn")?null:r.refPrevButton;return t=e.shiftKey?n||s:s||n,t&&t.focus(),void e.preventDefault()}if([38,39,40,37].indexOf(e.which)!==-1){var a=r.getDaysInMonth(r.props.initDate),o=(r.state.currentlyActiveDate||r.props.initDate).getDate(),i=null;switch(e.which){case 38:i=Math.max(1,o-7);break;case 39:i=Math.min(a,o+1);break;case 40:i=Math.min(a,o+7);break;case 37:i=Math.max(1,o-1)}if(null!=i){var l=new Date(r.state.viewDate.getTime());l.setDate(i),r.clampToFirstLastDate(l),r.setState({currentlyActiveDate:l})}e.preventDefault()}},r.renderDay=function(e,t){var s=!t;r.props.lastDay&&(t=t||e>r.props.lastDay),r.props.firstDay&&(t=t||e<r.props.firstDay);var o=u(r.state.currentlyActiveDate,e),l=u(r.props.initDate,e),c={"button-as-link":!t,"c-calendar__date":!0,"c-calendar__date--disabled":t,"current-month":s,"c-calendar__date--was-initially-active":l,"c-calendar__date--is-active":o},p=d;u(r.state.currentlyActiveDate,e)&&(p=r.setCurrentDayButtonRefAndMaintainFocus);var h="day"+e.getDate()+"-"+e.getMonth(),m=i.nice_date_with_month_name(e,!0,!0,!0);return a.createElement("td",{key:h},a.createElement("button",{className:n(c),disabled:t,onClick:t?void 0:r.handleDayClicked,onKeyDown:r.handleKeyDownOnDay,"data-day-in-month":e.getDate(),"aria-label":m,ref:p},e.getDate()))},r.renderDays=function(){for(var e=[],t=new Date(r.state.viewDate.getFullYear(),r.state.viewDate.getMonth(),1),n=t.getDay(),s=n;s>0;s--){var o=new Date(t.getFullYear(),t.getMonth(),t.getDate());o.setDate(o.getDate()-s),e.push(r.renderDay(o,!0))}for(var i=new Date(r.state.viewDate.getFullYear(),r.state.viewDate.getMonth(),1);i.getMonth()===r.state.viewDate.getMonth();)e.push(r.renderDay(i)),i=new Date(r.state.viewDate.getFullYear(),r.state.viewDate.getMonth(),i.getDate()+1);for(var l=new Date(r.state.viewDate.getFullYear(),r.state.viewDate.getMonth()+1,0);6!==l.getDay();)l=new Date(l.getFullYear(),l.getMonth(),l.getDate()+1),e.push(r.renderDay(l,!0));var c=[],p=[];return e.forEach(function(e,t){p.push(e),(t+1)%7===0&&(c.push(a.createElement("tr",{key:"week-"+t},p)),p=[])}),c},r.offsetViewDateByMonth=function(e){r.setState({viewDate:new Date(r.state.viewDate.getFullYear(),r.state.viewDate.getMonth()+e,1)})},r.handleClickNextMonth=function(){r.offsetViewDateByMonth(1)},r.handleClickPrevMonth=function(){r.offsetViewDateByMonth(-1)},r.handleKeyDownMonthButton=function(e){if(27===e.which)return r.props.onEscapePressed(),void e.preventDefault();if(9===e.which){var t=!e.shiftKey,n=void 0,s=r.refNextButton.classList.contains("u-l-dn")?void 0:r.refNextButton,a=r.refPrevButton.classList.contains("u-l-dn")?void 0:r.refPrevButton,o=r.refCurrentDayButton;n=e.target===r.refPrevButton?t?s||o:o||s:t?o||a:a||o,n&&n.focus(),e.preventDefault()}},r.renderMonthChangers=function(){var e=[],t=new Date(r.state.viewDate.getFullYear(),r.state.viewDate.getMonth(),1),s=new Date(r.state.viewDate.getFullYear(),r.state.viewDate.getMonth(),r.getDaysInMonth(r.state.viewDate)),o={"arrow-select":!0,"u-l-dn":t<=r.props.firstDay,"ax-focusable":!0,"u-l-fl":!0};e.push(a.createElement("button",{className:n(o),onClick:r.handleClickPrevMonth,ref:r.setPrevMonthButtonRef,onKeyDown:r.handleKeyDownMonthButton},a.createElement("span",{className:"c-arrow c-arrow--left u-thide"},p._("Previous month"))));var i={"arrow-select":!0,"u-l-dn":s>=r.props.lastDay,"ax-focusable":!0,"u-l-fr":!0};return e.push(a.createElement("button",{className:n(i),onClick:r.handleClickNextMonth,ref:r.setNextMonthButtonRef,onKeyDown:r.handleKeyDownMonthButton},a.createElement("span",{className:"c-arrow c-arrow--right u-thide"},p._("Next month")))),e},r.renderWeekdayRows=function(){return[p._("Sunday"),p._("Monday"),p._("Tuesday"),p._("Wednesday"),p._("Thursday"),p._("Friday"),p._("Saturday")].map(function(e){return a.createElement("th",{key:e},a.createElement("abbr",{title:e},e.slice(0,3)))})},r.calendarId=++h,r}return r.__extends(t,e),t.prototype.componentDidMount=function(){this.refCurrentDayButton&&this.refCurrentDayButton.focus()},t.prototype.componentWillUpdate=function(e,t){if(t.viewDate&&t.viewDate.getMonth()!==this.state.viewDate.getMonth()){var r=new Date(t.viewDate.getTime()),n=this.getDaysInMonth(t.viewDate);r.setDate(Math.min(n,this.state.currentlyActiveDate.getDate())),this.clampToFirstLastDate(r),this.setState({currentlyActiveDate:r})}},t.prototype.render=function(){var e={"c-calendar":!0,"c-card":!0,"u-pad-xs":!0,"u-left":this.props.alignAtLeft,"u-right":!this.props.alignAtLeft},t="calendar-header-"+ ++this.calendarId,r=this.renderMonthChangers(),s=r[0],o=r[1],l=a.createElement("strong",{id:t,"aria-live":"assertive","aria-atomic":"true"},p._("%(month)s %(year)s",{comment:"For example 'January 2010'. This is used as part of a calendar."}).format({month:i.month_name(this.state.viewDate.getMonth()),year:this.state.viewDate.getFullYear()}));return a.createElement("div",{className:n(e)},a.createElement("div",{className:"c-calendar__nav u-mar-bottom-s u-font-center u-cf"},s,o,l),a.createElement("table",{className:"c-calendar__picker"},a.createElement("thead",{className:"ax-visually-hidden"},a.createElement("tr",null,this.renderWeekdayRows())),a.createElement("tbody",null,this.renderDays())))},t})(a.Component);_.displayName="CalendarView",_.defaultProps={onDateChange:d,onEscapePressed:d,alignAtLeft:!1},t.CalendarView=_,t.Calendar=l(m,["/static/css/scooter/scooter-scoped-vfl0UVTY2.css","/static/css/components/calendar-vflO2TC4l.css"])});var slice=[].slice;define("modules/clean/react/file_path_breadcrumb",["jquery","external/underscore","external/classnames","external/react","modules/core/i18n","modules/clean/em_string","modules/clean/react_logger","modules/clean/viewer"],function(e,t,r,n,s,a,o,i){var l,c,p,u,d;return s._,c=o.ReactLogger,p=n.DOM,l=100,d=function(e){return Math.floor(1e3*e)},u=function(e){return e/1e3},n.createClass({displayName:"FilePathBreadcrumb",propTypes:{paths:n.PropTypes.arrayOf(n.PropTypes.shape({name:n.PropTypes.string.isRequired,url:n.PropTypes.string.isRequired})).isRequired,pathClassname:n.PropTypes.string,handlePathClick:n.PropTypes.func,maxWidth:n.PropTypes.number,minPathWidth:n.PropTypes.number,morePathsString:n.PropTypes.string,pathDividerWidth:n.PropTypes.number,viewingUserId:n.PropTypes.number.isRequired,useLinks:n.PropTypes.bool},getDefaultProps:function(){return{pathClassname:"recents-item__subheading-path",maxWidth:46,minPathWidth:3,morePathsString:"…",pathDividerWidth:1.077,handlePathClick:t.noop,useLinks:!0}},componentWillMount:function(){return c.start(this.constructor.displayName)},componentDidMount:function(){return c.end(this.constructor.displayName)},_handlePathClick:function(e){return this.props.handlePathClick(e)},_getTotalPathWidth:function(e){var t,r,n,s,a,o;for(o=0,a=d(this.props.pathDividerWidth),t=r=0,n=e.length;r<n;t=++r)s=e[t],o+=s.workingWidth,t<e.length-1&&(o+=a);return o},_createPathMetadata:function(e){var t;return t=new a(e.name).length,{name:e.name,href:e.url,width:t,workingWidth:d(t)}},_getPathsAvailable:function(){return this.props.paths.length>1?this.props.paths.slice(1):this.props.paths},_getPathsToShow:function(){var e,r,n,s,a,o,c,p,h,m,f,_,y,v,g,D,b,w,C,T,P,x;for(_=d(this.props.minPathWidth),g=d(this.props.pathDividerWidth),e=d(this.props.maxWidth),x=i.get_viewer(),x.get_user_by_id(this.props.viewingUserId),w=[],b=this._getPathsAvailable(),s=o=0,f=b.length;o<f;s=++o)v=b[s],D=this._createPathMetadata(v),w.push(D);for(P=function(){var r;return r=t.last(w),r.width=u(e),r.workingWidth=e,[r]},y=1,a=0;this._getTotalPathWidth(w)>e;){if(a++>l)return P();if(y+1<w.length)r=w[0],T=this._createPathMetadata({name:this.props.morePathsString}),n=[r,T],m=w.slice(y+1,w.length),w=n.concat(m),y++;else{if(1===w.length)return P();for(h=e,s=c=0,C=w.length-1;0<=C?c<C:c>C;s=0<=C?++c:--c)v=w[s],h-=v.workingWidth+g;if(h<_)return P();p=t.last(w),p.width=u(h),p.workingWidth=h}}return w},_renderPaths:function(){var e,t;return e=this._handlePathClick,t=this._getPathsToShow().map((function(t){return function(n){var s,o;return o=a.em_snippet(n.name,n.width),s=[t.props.pathClassname],n.href&&t.props.useLinks?p.a({href:n.href,className:r.apply(null,s),onClick:e},o):(s.push(t.props.pathClassname+"--more"),p.span({className:r.apply(null,s)},o))}})(this)),p.span.apply(p,[null].concat(slice.call(t)))},render:function(){return this._renderPaths()}})}),define("modules/clean/react/modal",["external/classnames","external/react","external/react-dom","external/purify","jquery","modules/core/i18n","modules/core/dom","modules/clean/react/button","modules/clean/static_urls","modules/clean/keycode"],function(e,t,r,n,s,a,o,i,l,c){var p,u,d,h,m,f,_,y,v,g,D,b;return _=a._,v=i.button,b=l.static_url,p=c.KeyCode,D=t.DOM,g=t.createElement,u="react-modal-root",y=function(e){var t,r;return null==e&&(e=!0),t=u,r=s("#"+t),!r.length&&e&&(r=s("<div />").attr({id:t}).prependTo("body")),r[0]},d=t.createClass({displayName:"Modal",statics:{showInstance:function(e,t){var n;return null==t&&(t=!0),n=y(),t&&(r.unmountComponentAtNode(n),s(n).siblings().not("#accessible-announce").attr("aria-hidden",!0)),r.render(e,n)},close:function(e){var t;t=y(),t&&(r.unmountComponentAtNode(t),s(t).siblings().removeAttr("aria-hidden"),null!=e&&e.focus())},unhide:function(){var e;if(e=y())return s(e).show()},hide:function(){var e;if(e=y())return s(e).hide()}},propTypes:{width:t.PropTypes.number,submitting:t.PropTypes.bool,title:t.PropTypes.oneOfType([t.PropTypes.string,t.PropTypes.element]),acceptButtonText:t.PropTypes.string,dismissButtonText:t.PropTypes.string,acceptButtonImportance:t.PropTypes.string,dismissButtonImportance:t.PropTypes.string,altAction:t.PropTypes.node,trackingIdPrefix:t.PropTypes.string,headerId:t.PropTypes.string,onAccept:t.PropTypes.func,onDismiss:t.PropTypes.func,onDismissCompleted:t.PropTypes.func,onShow:t.PropTypes.func,buttonComponent:t.PropTypes.element,autoClose:t.PropTypes.bool,clickOutToClose:t.PropTypes.bool,showX:t.PropTypes.bool,escapeOrBackspaceToClose:t.PropTypes.bool,showButtonDivider:t.PropTypes.bool,acceptButtonDisabled:t.PropTypes.bool,dismissButtonDisabled:t.PropTypes.bool,autoFocusPrimaryInput:t.PropTypes.bool,style:t.PropTypes.oneOf(["default","default-maestro","clean","simple","lightbox","bare"]),setMaxHeight:t.PropTypes.bool,className:t.PropTypes.string},close:function(){return d.close(this.elementToFocusOnClose)},_invokeCallbackAndClose:function(e,t,r){if(null!=e&&"function"==typeof e.call&&e.call(this,t),!t.isDefaultPrevented())return this.props.autoClose||r?this.close():void 0},_dismiss:function(e){var t;this._invokeCallbackAndClose(this.props.onDismiss,e,!0),null!=(t=this.props.onDismissCompleted)&&"function"==typeof t.call&&t.call(this,e)},_accept:function(e){this._invokeCallbackAndClose(this.props.onAccept,e,!1)},_onClickOnOverlay:function(e){
this.props.clickOutToClose&&this._dismiss(e)},getDefaultProps:function(){return{acceptButtonText:_("OK"),acceptButtonImportance:"primary",dismissButtonImportance:"tertiary",dismissButtonText:null,buttonComponent:null,headerId:"db-modal-title",onAccept:function(){},onDismiss:function(){},onShow:function(){},autoClose:!0,clickOutToClose:!0,style:"default",showX:!0,escapeOrBackspaceToClose:!0,acceptButtonDisabled:!1,dismissButtonDisabled:!1,autoFocusPrimaryInput:!0}},_focus:function(){var e,t,n,a;return this.elementToFocusOnClose=document.activeElement,e=s(r.findDOMNode(this.refs.modal)),this.props.autoFocusPrimaryInput&&(t=e.find("input:not(:disabled)").first(),n=null!=this.refs.primaryButton&&s(r.findDOMNode(this.refs.primaryButton)),a=null!=this.refs.tertiaryButton&&s(r.findDOMNode(this.refs.tertiaryButton)),t.length?e=t:n.length&&!n.is(":disabled")?e=s(r.findDOMNode(this.refs.primaryButton)):a.length&&!a.is(":disabled")&&(e=s(r.findDOMNode(this.refs.tertiaryButton)))),e.focus()},_keyDown:function(e){if(e.which===p.ESC&&(e.stopPropagation(),this.props.escapeOrBackspaceToClose&&this._dismiss(e)),e.which!==p.BACKSPACE||o.focus_in_input()||(e.preventDefault(),this.props.escapeOrBackspaceToClose&&this._dismiss(e)),null!=this.refs.modal)return o.keepFocusIn(r.findDOMNode(this.refs.modal),e)},_trackingId:function(e){return null!=this.props.trackingIdPrefix?this.props.trackingIdPrefix+"-"+e:null},_renderAcceptButton:function(){return g(v,{ref:"primaryButton",key:"primary",className:"dbmodal-button","data-trackingid":this._trackingId("accept"),importance:this.props.acceptButtonImportance,disabled:this.props.acceptButtonDisabled,onClick:this._accept},this.props.acceptButtonText)},_renderDismissButton:function(){return g(v,{ref:"tertiaryButton",key:"tertiary-dismiss",className:"dbmodal-button","data-trackingid":this._trackingId("dismiss"),importance:this.props.dismissButtonImportance,disabled:this.props.dismissButtonDisabled,onClick:this._dismiss},this.props.dismissButtonText)},_renderButtons:function(){var e;return this.props.buttonComponent?this.props.buttonComponent:(e=[],this.props.submitting&&e.push(D.span({className:"dbmodal-loading",key:"loading"},D.img({src:b("/static/images/icons/ajax-loading-small-vfl3Wt7C_.gif"),alt:_("Loading")}))),"default-maestro"===this.props.style?(this.props.dismissButtonText&&e.push(this._renderDismissButton()),this.props.acceptButtonText&&e.push(this._renderAcceptButton())):(this.props.acceptButtonText&&e.push(this._renderAcceptButton()),this.props.dismissButtonText&&e.push(this._renderDismissButton())),e.length?D.div({className:"db-modal-buttons"},this.props.showButtonDivider?D.hr({}):void 0,e):void 0)},_renderAltAction:function(){if(this.props.altAction)return D.div({className:"db-modal__alt-action"},this.props.altAction)},componentDidMount:function(){var e;return s(document).trigger("modalOpened",this),o.scroll_lock_document(),s(r.findDOMNode(this.refs.modal)).on("keydown",this._keyDown),this._focus(),"function"==typeof(e=this.props).onShow?e.onShow():void 0},componentWillUnmount:function(){return s(document).trigger("modalClosed",this),o.scroll_unlock_document(),s(r.findDOMNode(this.refs.modal)).off("keydown",this._keyDown)},render:function(){var t,r,n,s;return r={"db-modal-wrapper":!0,"db-modal--clean-style":"clean"===this.props.style,"db-modal--simple-style":"simple"===this.props.style,"db-modal--lightbox-style":"lightbox"===this.props.style,"db-modal--bare-style":"bare"===this.props.style,"db-modal--default-maestro-style":"default-maestro"===this.props.style},null!=this.props.className&&(r[this.props.className]=!0),t=e(r),n=this.props.width?{width:this.props.width+"px"}:{},D.div({className:t},D.div({className:"db-modal-overlay",onClick:this._onClickOnOverlay}),D.div({ref:"modal",className:"db-modal",tabIndex:-1,style:n,role:"dialog","aria-labelledby":"lightbox"===this.props.style?"":this.props.headerId},D.div({className:"db-modal-box",ref:"modalBox"},"lightbox"===(s=this.props.style)||"bare"===s?D.div({className:"db-modal-"+this.props.style},this.props.children):D.div({},!this.props.showX||"default-maestro"===this.props.style&&"change-email-modal--maestro"!==this.props.className?void 0:D.button({className:"db-modal-x",onClick:this._dismiss,"aria-label":_("Close"),"data-trackingid":this._trackingId("dismiss")}),D.h2({id:"db-modal-title",className:"db-modal-title"},D.div({className:"db-modal-title-text",ref:"title"},this.props.title)),D.div({className:"db-modal-content clearfix",ref:"content"},this.props.children,this._renderButtons(),this._renderAltAction())))))}}),m=t.createClass({displayName:"ModalButtons",render:function(){var t,r,n,s;n={},r=this.props;for(t in r)s=r[t],n[t]=s;return n.className=e(this.props.className,"db-modal-buttons"),D.div(n)}}),h=t.createClass({displayName:"ModalButton",propTypes:{importance:t.PropTypes.oneOf(["primary","secondary","tertiary"])},getDefaultProps:function(){return{importance:"primary"}},render:function(){var t,r,n,s;n={},r=this.props;for(t in r)s=r[t],"importance"!==t&&(n[t]=s);return n.className=e(this.props.className,"dbmodal-button","button-"+this.props.importance),D.button(n)}}),f={show:function(e){var r,s;return s={acceptButtonText:e.confirm_text,trackingIdPrefix:e.trackingIdPrefix,onAccept:e.confirm_callback,dismissButtonText:e.cancel_text,onDismiss:e.cancel_callback,onDismissCompleted:e.cancel_completed_callback,title:e.title_text,width:e.width,className:"simple-modal",autoClose:e.autoclose,style:e.style,onShow:e.on_show},r=g(d,s,t.DOM.div({className:"simple-modal-content",dangerouslySetInnerHTML:{__html:n.sanitize(e.body_html)}})),d.showInstance(r)}},{Modal:d,SimpleModal:f,ModalButtons:m,ModalButton:h,ReactModal:d}});
//# sourceMappingURL=pkg-maestro-coreui-with-i18n.min.js-vflJuasvA.map